import numpy as np
import math

#numpy配列をスペースありのstring文字列に変換
def np2str(array):
    for i in range(len(array)):
        array[i]=array[i]
        
    #array[1],array[2]=array[2],array[1]

    out=" ".join(map(str,array))
    
    return out

#numpy配列をスペースありのstring文字列に変換
def np2strForList(array):
    out=[]
    for arr in array:
        out.append(" ".join(map(str,arr)))
    
    
    out=" ".join(map(str,out))

   
    return out

def rotminus(x,y):
    print(x,y)
    a=[0]*3
    for i in range(3):
        a[i]=x[i]-y[i]

    return a

#xyzの角度を取得
def rotxyz(vec1,vec2):
    
    #各2次元ベクトル
    vec1xy=np.array([vec1[0],vec1[1],0])
    vec1yz=np.array([0,vec1[1],vec1[2]])
    vec1zx=np.array([vec1[0],0,vec1[2]])
    vec2xy=np.array([vec2[0],vec2[1],0])
    vec2yz=np.array([0,vec2[1],vec2[2]])
    vec2zx=np.array([vec2[0],0,vec2[2]])
    #各長さ
    vec1xyLen=np.linalg.norm(vec1xy)
    vec1yzLen=np.linalg.norm(vec1yz)
    vec1zxLen=np.linalg.norm(vec1zx)
    vec2xyLen=np.linalg.norm(vec2xy)
    vec2yzLen=np.linalg.norm(vec2yz)
    vec2zxLen=np.linalg.norm(vec2zx)
    #各内積
    xInner=np.dot(vec1yz,vec2yz)
    yInner=np.dot(vec1zx,vec2zx)
    zInner=np.dot(vec1xy,vec2xy)

    #各角度
    #xrot=np.arccos(xInner/(vec1yzLen*vec2yzLen))
    #yrot=np.arccos(yInner/(vec1zxLen*vec2zxLen))
    #zrot=np.arccos(zInner/(vec1xyLen*vec2xyLen))

    xrot=(xInner/(vec1yzLen*vec2yzLen))
    yrot=(yInner/(vec1zxLen*vec2zxLen))
    zrot=(zInner/(vec1xyLen*vec2xyLen))

    if math.isnan(xrot):
        xrot=0
    if math.isnan(yrot):
        yrot=0
    if math.isnan(zrot):
        zrot=0
    
    xDeg=math.degrees(xrot)
    yDeg=math.degrees(yrot)
    zDeg=math.degrees(zrot)
    xDeg=(xDeg)
    yDeg=(yDeg)
    zDeg=(zDeg)
    #帰り値は全てfloat型
    return xDeg,yDeg,zDeg

#フレーム数
#frames=

frames=[[[0.1674003005027771, -0.4527864158153534, 0.05084437504410744], [-0.12786412239074707, -0.47431111335754395, 0.04694328457117081], [0.22353652119636536, -0.25521525740623474, -0.006677069701254368], [-0.25592097640037537, -0.2895985543727875, 0.014352009631693363], [0.3496590256690979, -0.36590465903282166, -0.1792156845331192], [-0.35824233293533325, -0.388171523809433, -0.15486370027065277]], [[0.16998478770256042, -0.4534657597541809, 0.04898853227496147], [-0.12795618176460266, -0.47455936670303345, 0.044234514236450195], [0.22455748915672302, -0.2595861554145813, -0.0180413369089365], [-0.25599756836891174, -0.29409152269363403, 0.005666857585310936], [0.3470682203769684, -0.37223321199417114, -0.1936468631029129], [-0.3579082787036896, -0.403984934091568, -0.16297979652881622]], [[0.17208226025104523, -0.4534481167793274, 0.04895956814289093], [-0.12806306779384613, -0.47472086548805237, 0.04425946623086929], [0.22861093282699585, -0.2606663703918457, -0.019177399575710297], [-0.26008716225624084, -0.2994671165943146, 0.00561902392655611], [0.3471207916736603, -0.3735237419605255, -0.1956208348274231], [-0.3578977882862091, -0.41551119089126587, -0.16272523999214172]], [[0.17699219286441803, -0.4530137777328491, 0.054187577217817307], [-0.1261836588382721, -0.4747375547885895, 0.05172298848628998], [0.2352694422006607, -0.2605959177017212, -0.014904607087373734], [-0.2621237635612488, -0.3061157464981079, 0.021916652098298073], [0.35234254598617554, -0.37344521284103394, -0.1911010891199112], [-0.3587832748889923, -0.4263664186000824, -0.12920884788036346]], [[0.18125244975090027, -0.4530546963214874, 0.050845373421907425], [-0.12399794161319733, -0.4754488468170166, 0.04654278978705406], [0.24274522066116333, -0.26072514057159424, -0.016414700075984], [-0.2622555196285248, -0.3116900622844696, 0.01211614441126585], [0.35417595505714417, -0.37375274300575256, -0.19069455564022064], [-0.35463666915893555, -0.43211671710014343, -0.1369769126176834]], [[0.1844138652086258, -0.4529924988746643, 0.05056394264101982], [-0.12187635898590088, -0.4757672846317291, 0.04638845846056938], [0.24822594225406647, -0.26087886095046997, -0.016240248456597328], [-0.2629500925540924, -0.317648321390152, 0.013955166563391685], [0.36180153489112854, -0.37385794520378113, -0.1906469166278839], [-0.34664061665534973, -0.43712037801742554, -0.12873773276805878]], [[0.1866615116596222, -0.45181044936180115, 0.05016930028796196], [-0.12070176750421524, -0.47575512528419495, 0.04637644439935684], [0.2524239718914032, -0.2606487572193146, -0.016507836058735847], [-0.26502200961112976, -0.3214177191257477, 0.02057412639260292], [0.3663334250450134, -0.37370437383651733, -0.19133774936199188], [-0.34256789088249207, -0.44055503606796265, -0.10719963163137436]], [[0.1884523332118988, -0.45213204622268677, 0.04373268410563469], [-0.11993236094713211, -0.4758867025375366, 0.030983934178948402], [0.2600685656070709, -0.2630701959133148, -0.02389524318277836], [-0.2658012807369232, -0.3248693645000458, 0.011650319211184978], [0.3710613250732422, -0.3764381408691406, -0.20371535420417786], [-0.3340258300304413, -0.44249847531318665, -0.11352457106113434]], [[0.19273661077022552, -0.45249736309051514, 0.047057006508111954], [-0.11509467661380768, -0.4758925139904022, 0.03147195652127266], [0.2645028531551361, -0.26737669110298157, -0.023119665682315826], [-0.2641747295856476, -0.32463908195495605, 0.01169996615499258], [0.37392279505729675, -0.3771724998950958, -0.2026638239622116], [-0.3107316195964813, -0.4404027760028839, -0.11539214849472046]], [[0.19423368573188782, -0.4523872137069702, 0.0463901124894619], [-0.11195091158151627, -0.47495168447494507, 0.030146561563014984], [0.2670406997203827, -0.2682517468929291, -0.025062469765543938], [-0.2627837359905243, -0.32428112626075745, 0.003731105010956526], [0.37955257296562195, -0.3790738582611084, -0.20506130158901215], [-0.30166351795196533, -0.44164544343948364, -0.1189507320523262]], [[0.19426269829273224, -0.45233139395713806, 0.05503753945231438], [-0.11095014959573746, -0.47470712661743164, 0.04113194718956947], [0.26938724517822266, -0.26898062229156494, -0.015842285007238388], [-0.26208004355430603, -0.3254908323287964, 0.01181146688759327], [0.38155290484428406, -0.3828943073749542, -0.19129079580307007], [-0.30002203583717346, -0.4483512043952942, -0.11469325423240662]], [[0.19514089822769165, -0.45354363322257996, 0.056372396647930145], [-0.10895977914333344, -0.47471264004707336, 0.040345676243305206], [0.2730890214443207, -0.274505078792572, -0.01515640877187252], [-0.26012763381004333, -0.3256339430809021, 0.003597963135689497], [0.382960706949234, -0.38750597834587097, -0.19110313057899475], [-0.29290837049484253, -0.4483001232147217, -0.13128985464572906]], [[0.19534635543823242, -0.45250189304351807, 0.062349770218133926], [-0.10504662245512009, -0.47386041283607483, 0.038296520709991455], [0.27428117394447327, -0.2736636996269226, -0.0013838205486536026], [-0.25319957733154297, -0.32501599192619324, -0.007473348639905453], [0.3877611756324768, -0.3877527117729187, -0.1669202297925949], [-0.28537869453430176, -0.44837063550949097, -0.1521739661693573]], [[0.19510984420776367, -0.4525146782398224, 0.06210535019636154], [-0.10518068820238113, -0.473435640335083, 0.035839829593896866], [0.27414071559906006, -0.27332356572151184, -0.00025164271937683225], [-0.2512383759021759, -0.31808188557624817, -0.01653832197189331], [0.3876599967479706, -0.3874596655368805, -0.16725699603557587], [-0.2722361981868744, -0.4430880844593048, -0.16902221739292145]], [[0.19496624171733856, -0.45471715927124023, 0.05205531418323517], [-0.10516227781772614, -0.47342827916145325, 0.006510013248771429], [0.2816828787326813, -0.2778799831867218, -0.0013080319622531533], [-0.2459513247013092, -0.3147432208061218, -0.05745633691549301], [0.3937801718711853, -0.3956882357597351, -0.16447573900222778], [-0.26305681467056274, -0.4410267472267151, -0.22173812985420227]], [[0.19239598512649536, -0.45770063996315, 0.043940674513578415], [-0.1061505377292633, -0.4741971492767334, -0.009150965139269829], [0.28061196208000183, -0.28003188967704773, -0.008395226672291756], [-0.24615567922592163, -0.3135899603366852, -0.07302673161029816], [0.392617404460907, -0.397553026676178, -0.16746339201927185], [-0.2641814351081848, -0.43815112113952637, -0.2334360033273697]], [[0.19167853891849518, -0.45963260531425476, 0.029587263241410255], [-0.10597752779722214, -0.4742870330810547, -0.029916228726506233], [0.2834763526916504, -0.28402599692344666, -0.015038890764117241], [-0.24485565721988678, -0.3131118714809418, -0.09506537020206451], [0.39601436257362366, -0.40421730279922485, -0.16773788630962372], [-0.25935402512550354, -0.43671873211860657, -0.25297120213508606]], [[0.19010409712791443, -0.4614288806915283, 0.010743742808699608], [-0.10589498281478882, -0.4744376242160797, -0.05623287335038185], [0.28818613290786743, -0.28877174854278564, -0.029894648119807243], [-0.24275566637516022, -0.31434592604637146, -0.1373896449804306], [0.40093016624450684, -0.4123552739620209, -0.17202350497245789], [-0.25010743737220764, -0.4397667646408081, -0.30791962146759033]], [[0.18754802644252777, -0.4658086895942688, 0.006666380446404219], [-0.10590241849422455, -0.47451165318489075, -0.07802820950746536], [0.29422715306282043, -0.2974109649658203, -0.02888110652565956], [-0.24188239872455597, -0.31431785225868225, -0.16247054934501648], [0.40735653042793274, -0.42173972725868225, -0.16578133404254913], [-0.2476312667131424, -0.43957123160362244, -0.33082738518714905]], [[0.18704280257225037, -0.4681132733821869, -0.0009394754888489842], [-0.10588773339986801, -0.4745967984199524, -0.0831996500492096], [0.2948653995990753, -0.29760676622390747, -0.04137130081653595], [-0.24209174513816833, -0.31423816084861755, -0.16448920965194702], [0.40572208166122437, -0.4196459949016571, -0.1861897110939026], [-0.2469175159931183, -0.43815699219703674, -0.33260485529899597]], [[0.18654757738113403, -0.46910205483436584, -0.0024867819156497717], [-0.10479862987995148, -0.4743834137916565, -0.08623430132865906], [0.2944316864013672, -0.2964857220649719, -0.04580928757786751], [-0.23760086297988892, -0.3131490647792816, -0.16765263676643372], [0.4046742022037506, -0.4182227551937103, -0.19108636677265167], [-0.23709551990032196, -0.4377826452255249, -0.33368438482284546]], [[0.1864907294511795, -0.4695550799369812, 0.0005041076219640672], [-0.10404946655035019, -0.4743503928184509, -0.08070286363363266], [0.29476121068000793, -0.2957605719566345, -0.0442596860229969], [-0.2346467226743698, -0.310597687959671, -0.15849561989307404], [0.40383419394493103, -0.41699081659317017, -0.19250598549842834], [-0.2348487675189972, -0.43351662158966064, -0.3241877555847168]], [[0.18668235838413239, -0.47029536962509155, 0.002406227169558406], [-0.10328784584999084, -0.4734485447406769, -0.08168987929821014], [0.3002051115036011, -0.2973259389400482, -0.04303085431456566], [-0.23162510991096497, -0.3066169321537018, -0.16037368774414062], [0.40725284814834595, -0.4161331057548523, -0.19173194468021393], [-0.231216698884964, -0.42795324325561523, -0.32636386156082153]], [[0.18801601231098175, -0.4701704680919647, 0.003948290832340717], [-0.10235235840082169, -0.47287386655807495, -0.0752730593085289], [0.3000684678554535, -0.29638808965682983, -0.04185866937041283], [-0.22569438815116882, -0.2977944016456604, -0.15086466073989868], [0.40659019351005554, -0.4142770767211914, -0.19758614897727966], [-0.2271275669336319, -0.4176732003688812, -0.3150756359100342]], [[0.1882055699825287, -0.4724836051464081, 0.007306791841983795], [-0.10075237601995468, -0.4721047878265381, -0.07713132351636887], [0.30072593688964844, -0.2982541024684906, -0.034294046461582184], [-0.22068198025226593, -0.29441434144973755, -0.15052902698516846], [0.40627461671829224, -0.41632166504859924, -0.18445970118045807], [-0.22184883058071136, -0.40994057059288025, -0.3102900981903076]], [[0.18710957467556, -0.47348806262016296, 0.013162802904844284], [-0.1009712964296341, -0.4714919924736023, -0.08231262862682343], [0.3020046353340149, -0.30078843235969543, -0.016526971012353897], [-0.21855975687503815, -0.28847768902778625, -0.15993589162826538], [0.409152626991272, -0.4191398024559021, -0.15731355547904968], [-0.2194349765777588, -0.4040212333202362, -0.31901711225509644]], [[0.18609975278377533, -0.47365131974220276, 0.022816933691501617], [-0.10148017853498459, -0.47126737236976624, -0.07981425523757935], [0.30187034606933594, -0.3016199469566345, -0.009829013608396053], [-0.21693843603134155, -0.2874719798564911, -0.15874771773815155], [0.40925002098083496, -0.41925984621047974, -0.15820743143558502], [-0.22063900530338287, -0.39954760670661926, -0.3203792870044708]], [[0.18468967080116272, -0.47444167733192444, 0.024602454155683517], [-0.10235936939716339, -0.47043105959892273, -0.07913853973150253], [0.30102840065956116, -0.30152490735054016, -0.00835544615983963], [-0.21631518006324768, -0.28456008434295654, -0.15785829722881317], [0.4080476462841034, -0.4191277027130127, -0.15700016915798187], [-0.22246284782886505, -0.3971036672592163, -0.31979018449783325]], [[0.18184204399585724, -0.4762042760848999, 0.024767175316810608], [-0.10491087287664413, -0.4701882004737854, -0.0779200941324234], [0.29915037751197815, -0.30268093943595886, -0.009350676089525223], [-0.2170448899269104, -0.28314581513404846, -0.1556924283504486], [0.40491440892219543, -0.41940420866012573, -0.15625394880771637], [-0.22370566427707672, -0.3953346610069275, -0.31753021478652954]], [[0.18011592328548431, -0.47881680727005005, 0.02480856142938137], [-0.10643303394317627, -0.46976467967033386, -0.07744842022657394], [0.29865652322769165, -0.3054504692554474, -0.00997172947973013], [-0.2165636122226715, -0.2798418700695038, -0.15567222237586975], [0.40381520986557007, -0.4229609966278076, -0.15335647761821747], [-0.2245435118675232, -0.39061033725738525, -0.3172946274280548]], [[0.18050743639469147, -0.48042526841163635, 0.026550456881523132], [-0.10644342005252838, -0.4693254232406616, -0.07257572561502457], [0.29853901267051697, -0.3058590888977051, -0.008933539502322674], [-0.21566948294639587, -0.2760995328426361, -0.14880797266960144], [0.4032882750034332, -0.4232539236545563, -0.15062615275382996], [-0.22512856125831604, -0.3880561292171478, -0.3106783330440521]], [[0.1804887354373932, -0.4811244606971741, 0.02650647982954979], [-0.10647577047348022, -0.4691748321056366, -0.07398712635040283], [0.299159973859787, -0.3074361979961395, -0.008483420126140118], [-0.21497848629951477, -0.2735225558280945, -0.15391775965690613], [0.40337175130844116, -0.42568981647491455, -0.15151368081569672], [-0.2256891280412674, -0.3847031891345978, -0.3260954022407532]], [[0.1804313212633133, -0.4817028343677521, 0.022275341674685478], [-0.10757226496934891, -0.46912962198257446, -0.07596056163311005], [0.30019640922546387, -0.30850672721862793, -0.016198011115193367], [-0.21513374149799347, -0.2737387418746948, -0.1582300364971161], [0.401800274848938, -0.42607560753822327, -0.1656731814146042], [-0.23247399926185608, -0.38375699520111084, -0.336899071931839]], [[0.17990954220294952, -0.48323214054107666, 0.022282956168055534], [-0.10837873071432114, -0.4691193699836731, -0.0814947709441185], [0.30120405554771423, -0.3123106062412262, -0.016207605600357056], [-0.2149893194437027, -0.27360042929649353, -0.17110638320446014], [0.4011664390563965, -0.43072396516799927, -0.16568513214588165], [-0.23413334786891937, -0.3816067576408386, -0.35232996940612793]], [[0.17892196774482727, -0.4848194718360901, 0.021135443821549416], [-0.11149532347917557, -0.4691701829433441, -0.0816439688205719], [0.30157485604286194, -0.31854167580604553, -0.017712220549583435], [-0.21832193434238434, -0.27402597665786743, -0.17063722014427185], [0.4003733992576599, -0.43651169538497925, -0.16748720407485962], [-0.24589703977108002, -0.38011687994003296, -0.3526052236557007]], [[0.17584159970283508, -0.4856266379356384, 0.015535518527030945], [-0.1234540343284607, -0.4691661596298218, -0.07939981669187546], [0.3035432994365692, -0.32282188534736633, -0.033604152500629425], [-0.23593734204769135, -0.2742595374584198, -0.163505420088768], [0.3996807634830475, -0.4380296766757965, -0.19007013738155365], [-0.27271708846092224, -0.3809847831726074, -0.3472031056880951]], [[0.17554162442684174, -0.4863583445549011, 0.014639797620475292], [-0.12789732217788696, -0.4696398079395294, -0.06707954406738281], [0.3087737560272217, -0.3259892463684082, -0.04135957360267639], [-0.2461915761232376, -0.2772500216960907, -0.1436103731393814], [0.399820476770401, -0.43860504031181335, -0.2031942456960678], [-0.29007193446159363, -0.38353827595710754, -0.3254217207431793]], [[0.17491064965724945, -0.48630204796791077, 0.007715869229286909], [-0.13208229839801788, -0.469706267118454, -0.07087121158838272], [0.31741586327552795, -0.3281039893627167, -0.0486673079431057], [-0.25667059421539307, -0.27795401215553284, -0.14797912538051605], [0.4014895558357239, -0.44250035285949707, -0.21187898516654968], [-0.30187347531318665, -0.38386353850364685, -0.33094412088394165]], [[0.1721174120903015, -0.4858085811138153, 0.007925192825496197], [-0.13482818007469177, -0.46982821822166443, -0.07272514700889587], [0.31969407200813293, -0.3306999206542969, -0.04623977094888687], [-0.2613074779510498, -0.27807125449180603, -0.1544748693704605], [0.4037885367870331, -0.4511270821094513, -0.20812289416790009], [-0.30727124214172363, -0.38408395648002625, -0.3418002128601074]], [[0.17055363953113556, -0.4850154519081116, 0.008369242772459984], [-0.13755814731121063, -0.47057008743286133, -0.0722198635339737], [0.320036381483078, -0.3299983739852905, -0.04507335647940636], [-0.26829999685287476, -0.2802436351776123, -0.14501751959323883], [0.40947866439819336, -0.4541639983654022, -0.20684804022312164], [-0.3248489201068878, -0.3845725357532501, -0.31773823499679565]], [[0.1701197475194931, -0.48323291540145874, 0.011532706208527088], [-0.1393039971590042, -0.4718320667743683, -0.06437309831380844], [0.3217921555042267, -0.32942408323287964, -0.043798379600048065], [-0.27194347977638245, -0.28569942712783813, -0.11597380042076111], [0.41390758752822876, -0.45373913645744324, -0.21556106209754944], [-0.3418973982334137, -0.3870777189731598, -0.2684348523616791]], [[0.16744062304496765, -0.48174771666526794, 0.01159819308668375], [-0.1464756727218628, -0.47198256850242615, -0.05706417188048363], [0.3224968910217285, -0.3314150869846344, -0.05052468553185463], [-0.28511515259742737, -0.28967177867889404, -0.08093509823083878], [0.4185790717601776, -0.46163755655288696, -0.23762641847133636], [-0.37130609154701233, -0.38985705375671387, -0.1924498826265335]], [[0.1628146916627884, -0.481784462928772, 0.014560122974216938], [-0.15455974638462067, -0.4723649322986603, -0.04235728830099106], [0.3221721053123474, -0.3416707515716553, -0.04917968064546585], [-0.2997730076313019, -0.2922447919845581, -0.06147719919681549], [0.42490890622138977, -0.4693148732185364, -0.23330780863761902], [-0.3909051716327667, -0.3912692368030548, -0.172707200050354]], [[0.1522083878517151, -0.4814416468143463, 0.025475338101387024], [-0.1690123826265335, -0.47219347953796387, -0.016857771202921867], [0.31921830773353577, -0.34490564465522766, -0.04703519865870476], [-0.32932600378990173, -0.29496893286705017, -0.04563067853450775], [0.4243353307247162, -0.47188377380371094, -0.23174111545085907], [-0.42513206601142883, -0.39756539463996887, -0.17428529262542725]], [[0.1444505900144577, -0.4800722002983093, 0.04425954073667526], [-0.17558230459690094, -0.47188910841941833, 0.006781780626624823], [0.31567615270614624, -0.3475237190723419, -0.02439897507429123], [-0.337642639875412, -0.29531487822532654, -0.024342237040400505], [0.4242590665817261, -0.47830528020858765, -0.19123774766921997], [-0.4383295178413391, -0.399061918258667, -0.1618528515100479]], [[0.13888266682624817, -0.4786851406097412, 0.06217862665653229], [-0.17938819527626038, -0.4709532558917999, 0.031478069722652435], [0.30642199516296387, -0.3470529019832611, -0.008512727916240692], [-0.34204843640327454, -0.29575079679489136, 0.012634609825909138], [0.4237877130508423, -0.47856733202934265, -0.17173734307289124], [-0.45808103680610657, -0.4000084400177002, -0.10792694240808487]], [[0.1324717253446579, -0.47841331362724304, 0.06839114427566528], [-0.18518751859664917, -0.4709065556526184, 0.0339067205786705], [0.29916253685951233, -0.346303254365921, 0.004423027858138084], [-0.34432366490364075, -0.2973443269729614, 0.01957441121339798], [0.42333275079727173, -0.4771912693977356, -0.15902264416217804], [-0.47221818566322327, -0.4009770452976227, -0.10075759142637253]], [[0.12758781015872955, -0.47821855545043945, 0.07562337815761566], [-0.18912796676158905, -0.4700019955635071, 0.044461414217948914], [0.29405030608177185, -0.3468058109283447, 0.017533544450998306], [-0.3567247986793518, -0.29822176694869995, 0.038189541548490524], [0.4229889512062073, -0.4759162962436676, -0.13972841203212738], [-0.48850858211517334, -0.40249374508857727, -0.07040031999349594]], [[0.11576510965824127, -0.47857263684272766, 0.07879416644573212], [-0.19858995079994202, -0.4693186581134796, 0.048322100192308426], [0.28571149706840515, -0.35144850611686707, 0.03896830976009369], [-0.36836764216423035, -0.29822883009910583, 0.03904767334461212], [0.42338308691978455, -0.4759129285812378, -0.09570104628801346], [-0.5042251348495483, -0.40241026878356934, -0.07316985726356506]], [[0.11065956950187683, -0.4785762131214142, 0.08310753107070923], [-0.20521508157253265, -0.4669214189052582, 0.05827850475907326], [0.2839934229850769, -0.3566783368587494, 0.0452365018427372], [-0.3741603195667267, -0.29815569519996643, 0.04652385786175728], [0.4253084361553192, -0.4760848879814148, -0.08863933384418488], [-0.5142533779144287, -0.3994070589542389, -0.06775445491075516]], [[0.10174893587827682, -0.47905656695365906, 0.09476607292890549], [-0.21290472149848938, -0.4648630917072296, 0.07420867681503296], [0.27311617136001587, -0.35645779967308044, 0.05672823637723923], [-0.3797363042831421, -0.2979048192501068, 0.07892822474241257], [0.42251476645469666, -0.47196799516677856, -0.09034554660320282], [-0.5286331176757812, -0.39114704728126526, -0.02047095075249672]]]
"""
for frame in range(len(frames)):
    for i1 in range(6):
        for i2 in range(3):
             frames[frame][i1][i2]=round(frames[frame][i1][i2],3)
print((frames))
"""





VectorUp=np.array([1,0,0])
Motions=[]



#角度
#左
before_LeftShoulder_rot=[0,0,0]
before_LeftElbow_rot=[0,0,0]
before_LeftWrist_rot=[0,0,0]

#右
before_RightShoulder_rot=[0,0,0]
before_RightElbow_rot=[0,0,0]
before_RightWrist_rot=[0,0,0]

#フレームごとに取得
for index, landmarks in enumerate(frames):

    
    #位置の設定。（L,Rは絶対位置、Left,Rightは相対位置）
    #部位ごとに取得＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝
    Base=np.array([0,0,0])
    #上半身ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
    LShoulder=np.array(landmarks[0])# 左肩
    RShoulder=np.array(landmarks[1])# 右肩
    LElbow=np.array(landmarks[2])# 左肘
    RElbow=np.array(landmarks[3])# 右肘
    LWrist=np.array(landmarks[4])# 左手首
    RWrist=np.array(landmarks[5])# 右手首
    HeartAbsol=((LShoulder+RShoulder)/2)#胸（左右の肩の中間点）


    if index==0:#初期オフセット設定
        
       
        #体の初期位置================================================================
        LeftShoulder_origin=LShoulder-HeartAbsol#左腰
        RightShoulder_origin=RShoulder-HeartAbsol#左腰
        LeftElbow_origin=LElbow-LShoulder#右ひじ
        RightElbow_origin=RElbow-RShoulder#左ひじ
        LeftWrist_origin=LWrist-LElbow#右手首
        RightWrist_origin=RWrist-RElbow#左手首


    root=[0,0,0,0,0,0]#座標、回転
    #腰から上半身、右足、左足の三つに分かれる
    #左足================================================================
    LeftShoulder=LShoulder-HeartAbsol#左腰
    RightShoulder=RShoulder-HeartAbsol#左腰
    LeftElbow=LElbow-LShoulder#右ひじ
    RightElbow=RElbow-RShoulder#左ひじ
    LeftWrist=LWrist-LElbow#右手首
    RightWrist=RWrist-RElbow#左手首

    if not index==0:

        #前の角度ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
        #左
        before_LeftShoulder_rot=LeftShoulder_rot
        before_LeftElbow_rot=LeftElbow_rot
        before_LeftWrist_rot=LeftWrist_rot

        #右
        before_RightShoulder_rot=RightShoulder_rot
        before_RightElbow_rot=RightElbow_rot
        before_RightWrist_rot=RightWrist_rot
        #ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
    #角度
    #左
    LeftShoulder_rot=rotxyz(VectorUp,LeftShoulder)
    LeftElbow_rot=rotxyz(LeftShoulder,LeftElbow)
    LeftWrist_rot=rotxyz(LeftElbow,LeftWrist)

    #右
    RightShoulder_rot=rotxyz(VectorUp,RightShoulder)
    RightElbow_rot=rotxyz(RightShoulder,RightElbow)
    RightWrist_rot=rotxyz(RightElbow,RightWrist)


    """
    
    #モーション作成
    Motions.append(np2strForList([
                    np.array([0,0,0]),np.array([0,0,0]),
                    LeftShoulder_rot,LeftElbow_rot,LeftWrist_rot,
                    RightShoulder_rot,RightElbow_rot,RightWrist_rot
                    ]))
    """
    if index==0:
        #モーション作成
        Motions.append(np2strForList([
                        np.array([0,0,0]),np.array([0,0,0]),
                        [0,0,0],[0,0,0],[0,0,0],
                        [0,0,0],[0,0,0],[0,0,0]
                        ]))

    else:
        #モーション作成
        Motions.append(np2strForList([
                        np.array([0,0,0]),np.array([0,0,0]),
                        rotminus(LeftShoulder_rot,before_LeftShoulder_rot),rotminus(LeftElbow_rot,before_LeftElbow_rot),rotminus(LeftWrist_rot,before_LeftWrist_rot),
                        rotminus(RightShoulder_rot,before_RightShoulder_rot),rotminus(RightElbow_rot,before_RightElbow_rot),rotminus(RightWrist_rot,before_RightWrist_rot)
                        ]))


bvh_content_complex_japanese = f"""
HIERARCHY
ROOT Base
{{
    OFFSET 0.00 0.00 0.00 	
    CHANNELS 6 Xposition Yposition Zposition Zrotation Yrotation Xrotation
    JOINT LeftShoulder
    {{
        OFFSET 0.00 0.00 0.00
        CHANNELS 3 Zrotation Yrotation Xrotation
        JOINT LeftElbow
        {{
            OFFSET {np2str(LeftShoulder_origin)}
            CHANNELS 3 Zrotation Yrotation Xrotation
            JOINT RightWrist
            {{
                OFFSET {np2str(LeftElbow_origin)}
                CHANNELS 3 Zrotation Yrotation Xrotation
                    End Site
                    {{
                        OFFSET {np2str(LeftWrist_origin)}
                    }}
            }}
        }}
    }}
    JOINT RightShoulder
    {{
        OFFSET 0.00 0.00 0.00
        CHANNELS 3 Zrotation Yrotation Xrotation
        JOINT RightElbow
        {{
            OFFSET {np2str(RightShoulder_origin)}
            CHANNELS 3 Zrotation Yrotation Xrotation
            JOINT RightWrist
            {{
                OFFSET {np2str(RightElbow_origin)}
                CHANNELS 3 Zrotation Yrotation Xrotation
                        End Site
                        {{
                            OFFSET {np2str(RightWrist_origin)}
                        }}
            }}
        }}
    }}
}}
MOTION
Frames: {len(frames)}
Frame Time: 0.0333333
"""

# Saving the content to a BVH file
#BVHファイル書き込み
bvh_complex_japanese_file_path = './BVHfile/bvh_check.bvh'
with open(bvh_complex_japanese_file_path, 'w') as file:
    file.write(bvh_content_complex_japanese.strip())
    file.write("\n")#改行

    for i in Motions:
        file.write(i)
        file.write("\n")#改行

        pass